name: Test Secrets Configuration

on:
  workflow_dispatch:

jobs:
  test-secrets:
    runs-on: ubuntu-latest
    
    steps:
    - name: Test Secrets
      run: |
        echo "üîç Testando configura√ß√£o das secrets..."
        
        # Verificar se as secrets existem
        if [ -n "${{ secrets.K3S_API_URL }}" ]; then
          echo "‚úÖ K3S_API_URL est√° configurada"
          echo "   URL: ${{ secrets.K3S_API_URL }}"
        else
          echo "‚ùå K3S_API_URL N√ÉO est√° configurada"
        fi
        
        if [ -n "${{ secrets.K3S_CA_CERT }}" ]; then
          echo "‚úÖ K3S_CA_CERT est√° configurada"
          echo "   Tamanho: $(echo '${{ secrets.K3S_CA_CERT }}' | wc -c) caracteres"
        else
          echo "‚ùå K3S_CA_CERT N√ÉO est√° configurada"
        fi
        
        if [ -n "${{ secrets.K3S_TOKEN }}" ]; then
          echo "‚úÖ K3S_TOKEN est√° configurada"
          echo "   Tamanho: $(echo '${{ secrets.K3S_TOKEN }}' | wc -c) caracteres"
        else
          echo "‚ùå K3S_TOKEN N√ÉO est√° configurada"
        fi
        
        echo ""
        echo "üéØ INSTRU√á√ïES:"
        echo "Se alguma secret n√£o est√° configurada:"
        echo "1. V√° em Settings ‚Üí Secrets and variables ‚Üí Actions"
        echo "2. Adicione as secrets necess√°rias:"
        echo "   - K3S_API_URL: https://31.97.171.115:6443"
        echo "   - K3S_CA_CERT: [certificado em base64]"
        echo "   - K3S_TOKEN: [token do ServiceAccount]"
